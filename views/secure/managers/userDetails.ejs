<div id="user-details-container" class="user-container">
  <h2>User Details</h2>
  <% if (message.error) { %>
  <div class="error-container">
    <%= message.error %>
  </div>
  <% } %>
  <% if (message.success) { %>
  <div class="success-container">
    <%= message.success %>
  </div>
  <% } %>
  <a href="/users">Return to Users</a>
  <table class="user-details-table">
    <tr>
      <td><strong>Username:</strong></td>
      <td><%= user.username %></td>
    </tr>
    <tr>
      <td><strong>Email:</strong></td>
      <td><%= user.email %></td>
    </tr>
    <tr>
      <td><strong>First Name:</strong></td>
      <td><%= user.firstName %></td>
    </tr>
    <tr>
      <td><strong>Last Name:</strong></td>
      <td><%= user.lastName %></td>
    </tr>
    <tr>
      <td><strong>Roles:</strong></td>
      <td><%= user.roles && user.roles.length > 0 ? user.roles.join(", ") : '--' %></td>
    </tr>
    <tr>
      <td><strong>Is Client:</strong></td>
      <td>
        <% if (user.clientId) { %>
        Yes <a href="/clients/<%= user.clientId %>">(View client details)</a>
        <% } else { %>
        No
        <% } %>
      </td>
    </tr>
  </table>
  <div class="user-actions">
    <a href="<%= authInfo.username === user.username ? '/auth/user' : '/users/' + encodeURIComponent(user.username) + '/edit' %>" class="edit-link">Edit</a>
    <% if (authInfo.roles.includes("admin")) { %>
    <a href="/users/<%= encodeURIComponent(user.username) %>/delete" class="delete-link">Delete</a>
    <% } %>
</div>
</div>